                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.5.4 #9329 (Linux)
                              4 ; This file was generated Mon Feb  8 21:24:02 2016
                              5 ;--------------------------------------------------------
                              6 	.module depot
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _drawDepot
                             13 	.globl _drawWindow
                             14 	.globl _drawMenu
                             15 	.globl _putM2
                             16 	.globl _putM0
                             17 	.globl _realloc
                             18 	.globl _malloc
                             19 	.globl _floorf
                             20 	.globl _cpct_getScreenPtr
                             21 	.globl _cpct_drawSolidBox
                             22 	.globl _cpct_drawSprite
                             23 	.globl _cpct_px2byteM0
                             24 	.globl _cpct_isKeyPressed
                             25 	.globl _cpct_scanKeyboard
                             26 	.globl _cpct_memset
                             27 	.globl _railroadDepot
                             28 	.globl _drawLocomotive
                             29 	.globl _drawAllLocomotives
                             30 	.globl _confirmBuyLocomotive
                             31 	.globl _buyLocomotive
                             32 ;--------------------------------------------------------
                             33 ; special function registers
                             34 ;--------------------------------------------------------
                             35 ;--------------------------------------------------------
                             36 ; ram data
                             37 ;--------------------------------------------------------
                             38 	.area _DATA
                             39 ;--------------------------------------------------------
                             40 ; ram data
                             41 ;--------------------------------------------------------
                             42 	.area _INITIALIZED
                             43 ;--------------------------------------------------------
                             44 ; absolute external ram data
                             45 ;--------------------------------------------------------
                             46 	.area _DABS (ABS)
                             47 ;--------------------------------------------------------
                             48 ; global & static initialisations
                             49 ;--------------------------------------------------------
                             50 	.area _HOME
                             51 	.area _GSINIT
                             52 	.area _GSFINAL
                             53 	.area _GSINIT
                             54 ;--------------------------------------------------------
                             55 ; Home
                             56 ;--------------------------------------------------------
                             57 	.area _HOME
                             58 	.area _HOME
                             59 ;--------------------------------------------------------
                             60 ; code
                             61 ;--------------------------------------------------------
                             62 	.area _CODE
                             63 ;src/game/depot.c:3: void drawDepot()
                             64 ;	---------------------------------
                             65 ; Function drawDepot
                             66 ; ---------------------------------
   0000                      67 _drawDepot::
                             68 ;src/game/depot.c:8: cpct_clearScreen(0b11111111);
   0000 21 00 40      [10]   69 	ld	hl,#0x4000
   0003 E5            [11]   70 	push	hl
   0004 3E FF         [ 7]   71 	ld	a,#0xFF
   0006 F5            [11]   72 	push	af
   0007 33            [ 6]   73 	inc	sp
   0008 26 C0         [ 7]   74 	ld	h, #0xC0
   000A E5            [11]   75 	push	hl
   000B CDr00r00      [17]   76 	call	_cpct_memset
                             77 ;src/game/depot.c:10: for(i=0; i<nbTrainList; i++)
   000E 11 00 00      [10]   78 	ld	de,#0x0000
   0011                      79 00103$:
   0011 21r00r00      [10]   80 	ld	hl,#_nbTrainList
   0014 7A            [ 4]   81 	ld	a,d
   0015 96            [ 7]   82 	sub	a, (hl)
   0016 D0            [11]   83 	ret	NC
                             84 ;src/game/depot.c:12: p_video = cpct_getScreenPtr(SCR_VMEM, 50, 10+i*20);
   0017 7B            [ 4]   85 	ld	a,e
   0018 C6 0A         [ 7]   86 	add	a, #0x0A
   001A D5            [11]   87 	push	de
   001B 57            [ 4]   88 	ld	d,a
   001C 1E 32         [ 7]   89 	ld	e,#0x32
   001E D5            [11]   90 	push	de
   001F 21 00 C0      [10]   91 	ld	hl,#0xC000
   0022 E5            [11]   92 	push	hl
   0023 CDr00r00      [17]   93 	call	_cpct_getScreenPtr
   0026 D1            [10]   94 	pop	de
                             95 ;src/game/depot.c:13: cpct_drawSprite(l130B_M2, p_video, 10, 10);
   0027 4D            [ 4]   96 	ld	c, l
   0028 44            [ 4]   97 	ld	b, h
   0029 D5            [11]   98 	push	de
   002A 21 0A 0A      [10]   99 	ld	hl,#0x0A0A
   002D E5            [11]  100 	push	hl
   002E C5            [11]  101 	push	bc
   002F 21r00r00      [10]  102 	ld	hl,#_l130B_M2
   0032 E5            [11]  103 	push	hl
   0033 CDr00r00      [17]  104 	call	_cpct_drawSprite
   0036 D1            [10]  105 	pop	de
                            106 ;src/game/depot.c:10: for(i=0; i<nbTrainList; i++)
   0037 7B            [ 4]  107 	ld	a,e
   0038 C6 14         [ 7]  108 	add	a, #0x14
   003A 5F            [ 4]  109 	ld	e,a
   003B 14            [ 4]  110 	inc	d
   003C 18 D3         [12]  111 	jr	00103$
                            112 ;src/game/depot.c:17: void railroadDepot()
                            113 ;	---------------------------------
                            114 ; Function railroadDepot
                            115 ; ---------------------------------
   003E                     116 _railroadDepot::
   003E DD E5         [15]  117 	push	ix
   0040 DD 21 00 00   [14]  118 	ld	ix,#0
   0044 DD 39         [15]  119 	add	ix,sp
   0046 F5            [11]  120 	push	af
   0047 F5            [11]  121 	push	af
   0048 3B            [ 6]  122 	dec	sp
                            123 ;src/game/depot.c:19: u8 exit=0;
   0049 DD 36 FF 00   [19]  124 	ld	-1 (ix),#0x00
                            125 ;src/game/depot.c:21: drawDepot();
   004D CDr00r00      [17]  126 	call	_drawDepot
                            127 ;src/game/depot.c:23: do
   0050                     128 00108$:
                            129 ;src/game/depot.c:25: cpct_scanKeyboard(); 
   0050 CDr00r00      [17]  130 	call	_cpct_scanKeyboard
                            131 ;src/game/depot.c:27: if ( cpct_isKeyPressed(Key_Esc) )
   0053 21 08 04      [10]  132 	ld	hl,#0x0408
   0056 CDr00r00      [17]  133 	call	_cpct_isKeyPressed
   0059 7D            [ 4]  134 	ld	a,l
   005A B7            [ 4]  135 	or	a, a
   005B 28 06         [12]  136 	jr	Z,00106$
                            137 ;src/game/depot.c:28: exit=1;
   005D DD 36 FF 01   [19]  138 	ld	-1 (ix),#0x01
   0061 18 32         [12]  139 	jr	00109$
   0063                     140 00106$:
                            141 ;src/game/depot.c:29: else if(cpct_isKeyPressed(Key_Return) )
   0063 21 02 04      [10]  142 	ld	hl,#0x0402
   0066 CDr00r00      [17]  143 	call	_cpct_isKeyPressed
   0069 7D            [ 4]  144 	ld	a,l
   006A B7            [ 4]  145 	or	a, a
   006B 28 28         [12]  146 	jr	Z,00109$
                            147 ;src/game/depot.c:31: const char *txtMenuChoice[] = { 
   006D 21 00 00      [10]  148 	ld	hl,#0x0000
   0070 39            [11]  149 	add	hl,sp
   0071 5D            [ 4]  150 	ld	e,l
   0072 54            [ 4]  151 	ld	d,h
   0073 36rA0         [10]  152 	ld	(hl),#<(___str_0)
   0075 23            [ 6]  153 	inc	hl
   0076 36s00         [10]  154 	ld	(hl),#>(___str_0)
   0078 6B            [ 4]  155 	ld	l, e
   0079 62            [ 4]  156 	ld	h, d
   007A 23            [ 6]  157 	inc	hl
   007B 23            [ 6]  158 	inc	hl
   007C 36rB1         [10]  159 	ld	(hl),#<(___str_1)
   007E 23            [ 6]  160 	inc	hl
   007F 36s00         [10]  161 	ld	(hl),#>(___str_1)
                            162 ;src/game/depot.c:35: u8 menuChoice = drawMenu(txtMenuChoice,2);
   0081 3E 02         [ 7]  163 	ld	a,#0x02
   0083 F5            [11]  164 	push	af
   0084 33            [ 6]  165 	inc	sp
   0085 D5            [11]  166 	push	de
   0086 CDr00r00      [17]  167 	call	_drawMenu
   0089 F1            [10]  168 	pop	af
   008A 33            [ 6]  169 	inc	sp
   008B 7D            [ 4]  170 	ld	a,l
                            171 ;src/game/depot.c:37: if(menuChoice == 0)
   008C B7            [ 4]  172 	or	a, a
   008D 20 03         [12]  173 	jr	NZ,00102$
                            174 ;src/game/depot.c:38: buyLocomotive();
   008F CDr06r06      [17]  175 	call	_buyLocomotive
   0092                     176 00102$:
                            177 ;src/game/depot.c:40: drawDepot();
   0092 CDr00r00      [17]  178 	call	_drawDepot
   0095                     179 00109$:
                            180 ;src/game/depot.c:44: while(!exit);
   0095 DD 7E FF      [19]  181 	ld	a,-1 (ix)
   0098 B7            [ 4]  182 	or	a, a
   0099 28 B5         [12]  183 	jr	Z,00108$
   009B DD F9         [10]  184 	ld	sp, ix
   009D DD E1         [14]  185 	pop	ix
   009F C9            [10]  186 	ret
   00A0                     187 ___str_0:
   00A0 42 75 79 20 61 20   188 	.ascii "Buy a locomotive"
        6C 6F 63 6F 6D 6F
        74 69 76 65
   00B0 00                  189 	.db 0x00
   00B1                     190 ___str_1:
   00B1 42 61 63 6B 20 74   191 	.ascii "Back to depot"
        6F 20 64 65 70 6F
        74
   00BE 00                  192 	.db 0x00
                            193 ;src/game/depot.c:47: void drawLocomotive(u8 i, u8 iSelect)
                            194 ;	---------------------------------
                            195 ; Function drawLocomotive
                            196 ; ---------------------------------
   00BF                     197 _drawLocomotive::
   00BF DD E5         [15]  198 	push	ix
   00C1 DD 21 00 00   [14]  199 	ld	ix,#0
   00C5 DD 39         [15]  200 	add	ix,sp
   00C7 21 F7 FF      [10]  201 	ld	hl,#-9
   00CA 39            [11]  202 	add	hl,sp
   00CB F9            [ 6]  203 	ld	sp,hl
                            204 ;src/game/depot.c:50: p_video = cpct_getScreenPtr(SCR_VMEM, 5+25*floorf(i/4), 30+40*(i%4));
   00CC DD 7E 04      [19]  205 	ld	a,4 (ix)
   00CF E6 03         [ 7]  206 	and	a, #0x03
   00D1 4F            [ 4]  207 	ld	c,a
   00D2 87            [ 4]  208 	add	a, a
   00D3 87            [ 4]  209 	add	a, a
   00D4 81            [ 4]  210 	add	a, c
   00D5 87            [ 4]  211 	add	a, a
   00D6 87            [ 4]  212 	add	a, a
   00D7 87            [ 4]  213 	add	a, a
   00D8 DD 77 FB      [19]  214 	ld	-5 (ix), a
   00DB C6 1E         [ 7]  215 	add	a, #0x1E
   00DD DD 77 F7      [19]  216 	ld	-9 (ix),a
   00E0 DD 7E 04      [19]  217 	ld	a,4 (ix)
   00E3 0F            [ 4]  218 	rrca
   00E4 0F            [ 4]  219 	rrca
   00E5 E6 3F         [ 7]  220 	and	a,#0x3F
   00E7 DD 77 FA      [19]  221 	ld	-6 (ix), a
   00EA F5            [11]  222 	push	af
   00EB 33            [ 6]  223 	inc	sp
   00EC CDr00r00      [17]  224 	call	___uchar2fs
   00EF 33            [ 6]  225 	inc	sp
   00F0 DD 72 FF      [19]  226 	ld	-1 (ix),d
   00F3 DD 73 FE      [19]  227 	ld	-2 (ix),e
   00F6 DD 74 FD      [19]  228 	ld	-3 (ix),h
   00F9 DD 75 FC      [19]  229 	ld	-4 (ix),l
   00FC DD 6E FE      [19]  230 	ld	l,-2 (ix)
   00FF DD 66 FF      [19]  231 	ld	h,-1 (ix)
   0102 E5            [11]  232 	push	hl
   0103 DD 6E FC      [19]  233 	ld	l,-4 (ix)
   0106 DD 66 FD      [19]  234 	ld	h,-3 (ix)
   0109 E5            [11]  235 	push	hl
   010A CDr00r00      [17]  236 	call	_floorf
   010D F1            [10]  237 	pop	af
   010E F1            [10]  238 	pop	af
   010F EB            [ 4]  239 	ex	de, hl
   0110 E5            [11]  240 	push	hl
   0111 D5            [11]  241 	push	de
   0112 21 C8 41      [10]  242 	ld	hl,#0x41C8
   0115 E5            [11]  243 	push	hl
   0116 21 00 00      [10]  244 	ld	hl,#0x0000
   0119 E5            [11]  245 	push	hl
   011A CDr00r00      [17]  246 	call	___fsmul
   011D F1            [10]  247 	pop	af
   011E F1            [10]  248 	pop	af
   011F F1            [10]  249 	pop	af
   0120 F1            [10]  250 	pop	af
   0121 4D            [ 4]  251 	ld	c,l
   0122 44            [ 4]  252 	ld	b,h
   0123 21 A0 40      [10]  253 	ld	hl,#0x40A0
   0126 E5            [11]  254 	push	hl
   0127 21 00 00      [10]  255 	ld	hl,#0x0000
   012A E5            [11]  256 	push	hl
   012B D5            [11]  257 	push	de
   012C C5            [11]  258 	push	bc
   012D CDr00r00      [17]  259 	call	___fsadd
   0130 F1            [10]  260 	pop	af
   0131 F1            [10]  261 	pop	af
   0132 F1            [10]  262 	pop	af
   0133 F1            [10]  263 	pop	af
   0134 D5            [11]  264 	push	de
   0135 E5            [11]  265 	push	hl
   0136 CDr00r00      [17]  266 	call	___fs2uchar
   0139 F1            [10]  267 	pop	af
   013A F1            [10]  268 	pop	af
   013B 55            [ 4]  269 	ld	d,l
   013C DD 7E F7      [19]  270 	ld	a,-9 (ix)
   013F F5            [11]  271 	push	af
   0140 33            [ 6]  272 	inc	sp
   0141 D5            [11]  273 	push	de
   0142 33            [ 6]  274 	inc	sp
   0143 21 00 C0      [10]  275 	ld	hl,#0xC000
   0146 E5            [11]  276 	push	hl
   0147 CDr00r00      [17]  277 	call	_cpct_getScreenPtr
                            278 ;src/game/depot.c:54: cpct_drawSolidBox(p_video, cpct_px2byteM0(5,5), 22, 22);
   014A DD 75 F8      [19]  279 	ld	-8 (ix),l
   014D DD 74 F9      [19]  280 	ld	-7 (ix),h
                            281 ;src/game/depot.c:53: if(i==iSelect)
   0150 DD 7E 04      [19]  282 	ld	a,4 (ix)
   0153 DD 96 05      [19]  283 	sub	a, 5 (ix)
   0156 20 1D         [12]  284 	jr	NZ,00102$
                            285 ;src/game/depot.c:54: cpct_drawSolidBox(p_video, cpct_px2byteM0(5,5), 22, 22);
   0158 21 05 05      [10]  286 	ld	hl,#0x0505
   015B E5            [11]  287 	push	hl
   015C CDr00r00      [17]  288 	call	_cpct_px2byteM0
   015F 55            [ 4]  289 	ld	d,l
   0160 21 16 16      [10]  290 	ld	hl,#0x1616
   0163 E5            [11]  291 	push	hl
   0164 D5            [11]  292 	push	de
   0165 33            [ 6]  293 	inc	sp
   0166 DD 6E F8      [19]  294 	ld	l,-8 (ix)
   0169 DD 66 F9      [19]  295 	ld	h,-7 (ix)
   016C E5            [11]  296 	push	hl
   016D CDr00r00      [17]  297 	call	_cpct_drawSolidBox
   0170 F1            [10]  298 	pop	af
   0171 F1            [10]  299 	pop	af
   0172 33            [ 6]  300 	inc	sp
   0173 18 1B         [12]  301 	jr	00103$
   0175                     302 00102$:
                            303 ;src/game/depot.c:56: cpct_drawSolidBox(p_video, cpct_px2byteM0(11,11), 22, 22);
   0175 21 0B 0B      [10]  304 	ld	hl,#0x0B0B
   0178 E5            [11]  305 	push	hl
   0179 CDr00r00      [17]  306 	call	_cpct_px2byteM0
   017C 55            [ 4]  307 	ld	d,l
   017D 21 16 16      [10]  308 	ld	hl,#0x1616
   0180 E5            [11]  309 	push	hl
   0181 D5            [11]  310 	push	de
   0182 33            [ 6]  311 	inc	sp
   0183 DD 6E F8      [19]  312 	ld	l,-8 (ix)
   0186 DD 66 F9      [19]  313 	ld	h,-7 (ix)
   0189 E5            [11]  314 	push	hl
   018A CDr00r00      [17]  315 	call	_cpct_drawSolidBox
   018D F1            [10]  316 	pop	af
   018E F1            [10]  317 	pop	af
   018F 33            [ 6]  318 	inc	sp
   0190                     319 00103$:
                            320 ;src/game/depot.c:58: p_video = cpct_getScreenPtr(SCR_VMEM, 5+25*floorf(i/4)+1, 30+40*(i%4)+1);
   0190 DD 7E FB      [19]  321 	ld	a,-5 (ix)
   0193 C6 1F         [ 7]  322 	add	a, #0x1F
   0195 DD 77 F8      [19]  323 	ld	-8 (ix),a
   0198 DD 6E FE      [19]  324 	ld	l,-2 (ix)
   019B DD 66 FF      [19]  325 	ld	h,-1 (ix)
   019E E5            [11]  326 	push	hl
   019F DD 6E FC      [19]  327 	ld	l,-4 (ix)
   01A2 DD 66 FD      [19]  328 	ld	h,-3 (ix)
   01A5 E5            [11]  329 	push	hl
   01A6 CDr00r00      [17]  330 	call	_floorf
   01A9 F1            [10]  331 	pop	af
   01AA F1            [10]  332 	pop	af
   01AB EB            [ 4]  333 	ex	de, hl
   01AC E5            [11]  334 	push	hl
   01AD D5            [11]  335 	push	de
   01AE 21 C8 41      [10]  336 	ld	hl,#0x41C8
   01B1 E5            [11]  337 	push	hl
   01B2 21 00 00      [10]  338 	ld	hl,#0x0000
   01B5 E5            [11]  339 	push	hl
   01B6 CDr00r00      [17]  340 	call	___fsmul
   01B9 F1            [10]  341 	pop	af
   01BA F1            [10]  342 	pop	af
   01BB F1            [10]  343 	pop	af
   01BC F1            [10]  344 	pop	af
   01BD 4D            [ 4]  345 	ld	c,l
   01BE 44            [ 4]  346 	ld	b,h
   01BF 21 C0 40      [10]  347 	ld	hl,#0x40C0
   01C2 E5            [11]  348 	push	hl
   01C3 21 00 00      [10]  349 	ld	hl,#0x0000
   01C6 E5            [11]  350 	push	hl
   01C7 D5            [11]  351 	push	de
   01C8 C5            [11]  352 	push	bc
   01C9 CDr00r00      [17]  353 	call	___fsadd
   01CC F1            [10]  354 	pop	af
   01CD F1            [10]  355 	pop	af
   01CE F1            [10]  356 	pop	af
   01CF F1            [10]  357 	pop	af
   01D0 D5            [11]  358 	push	de
   01D1 E5            [11]  359 	push	hl
   01D2 CDr00r00      [17]  360 	call	___fs2uchar
   01D5 F1            [10]  361 	pop	af
   01D6 F1            [10]  362 	pop	af
   01D7 55            [ 4]  363 	ld	d,l
   01D8 DD 7E F8      [19]  364 	ld	a,-8 (ix)
   01DB F5            [11]  365 	push	af
   01DC 33            [ 6]  366 	inc	sp
   01DD D5            [11]  367 	push	de
   01DE 33            [ 6]  368 	inc	sp
   01DF 21 00 C0      [10]  369 	ld	hl,#0xC000
   01E2 E5            [11]  370 	push	hl
   01E3 CDr00r00      [17]  371 	call	_cpct_getScreenPtr
                            372 ;src/game/depot.c:54: cpct_drawSolidBox(p_video, cpct_px2byteM0(5,5), 22, 22);
   01E6 4D            [ 4]  373 	ld	c, l
   01E7 44            [ 4]  374 	ld	b, h
                            375 ;src/game/depot.c:60: if(i<locDelocked)
   01E8 21r00r00      [10]  376 	ld	hl,#_locDelocked
   01EB DD 7E 04      [19]  377 	ld	a,4 (ix)
   01EE 96            [ 7]  378 	sub	a, (hl)
   01EF 30 52         [12]  379 	jr	NC,00110$
                            380 ;src/game/depot.c:62: switch(i)
   01F1 3E 03         [ 7]  381 	ld	a,#0x03
   01F3 DD 96 04      [19]  382 	sub	a, 4 (ix)
   01F6 38 57         [12]  383 	jr	C,00112$
   01F8 DD 5E 04      [19]  384 	ld	e,4 (ix)
   01FB 16 00         [ 7]  385 	ld	d,#0x00
   01FD 21r03r02      [10]  386 	ld	hl,#00128$
   0200 19            [11]  387 	add	hl,de
   0201 19            [11]  388 	add	hl,de
                            389 ;src/game/depot.c:64: case 0:
   0202 E9            [ 4]  390 	jp	(hl)
   0203                     391 00128$:
   0203 18 06         [12]  392 	jr	00104$
   0205 18 12         [12]  393 	jr	00105$
   0207 18 1E         [12]  394 	jr	00106$
   0209 18 2A         [12]  395 	jr	00107$
   020B                     396 00104$:
                            397 ;src/game/depot.c:65: cpct_drawSprite(l130B, p_video, 20, 20);
   020B 11r00r00      [10]  398 	ld	de,#_l130B+0
   020E 21 14 14      [10]  399 	ld	hl,#0x1414
   0211 E5            [11]  400 	push	hl
   0212 C5            [11]  401 	push	bc
   0213 D5            [11]  402 	push	de
   0214 CDr00r00      [17]  403 	call	_cpct_drawSprite
                            404 ;src/game/depot.c:66: break;
   0217 18 36         [12]  405 	jr	00112$
                            406 ;src/game/depot.c:67: case 1:
   0219                     407 00105$:
                            408 ;src/game/depot.c:68: cpct_drawSprite(l141TA, p_video, 20, 20);
   0219 11r00r00      [10]  409 	ld	de,#_l141TA+0
   021C 21 14 14      [10]  410 	ld	hl,#0x1414
   021F E5            [11]  411 	push	hl
   0220 C5            [11]  412 	push	bc
   0221 D5            [11]  413 	push	de
   0222 CDr00r00      [17]  414 	call	_cpct_drawSprite
                            415 ;src/game/depot.c:69: break;
   0225 18 28         [12]  416 	jr	00112$
                            417 ;src/game/depot.c:70: case 2:
   0227                     418 00106$:
                            419 ;src/game/depot.c:71: cpct_drawSprite(l142AT, p_video, 20, 20);
   0227 11r00r00      [10]  420 	ld	de,#_l142AT+0
   022A 21 14 14      [10]  421 	ld	hl,#0x1414
   022D E5            [11]  422 	push	hl
   022E C5            [11]  423 	push	bc
   022F D5            [11]  424 	push	de
   0230 CDr00r00      [17]  425 	call	_cpct_drawSprite
                            426 ;src/game/depot.c:72: break;
   0233 18 1A         [12]  427 	jr	00112$
                            428 ;src/game/depot.c:73: case 3:
   0235                     429 00107$:
                            430 ;src/game/depot.c:74: cpct_drawSprite(l141P, p_video, 20, 20);
   0235 11r00r00      [10]  431 	ld	de,#_l141P+0
   0238 21 14 14      [10]  432 	ld	hl,#0x1414
   023B E5            [11]  433 	push	hl
   023C C5            [11]  434 	push	bc
   023D D5            [11]  435 	push	de
   023E CDr00r00      [17]  436 	call	_cpct_drawSprite
                            437 ;src/game/depot.c:76: }
   0241 18 0C         [12]  438 	jr	00112$
   0243                     439 00110$:
                            440 ;src/game/depot.c:82: cpct_drawSprite(lock, p_video, 20, 20);
   0243 11r00r00      [10]  441 	ld	de,#_lock
   0246 21 14 14      [10]  442 	ld	hl,#0x1414
   0249 E5            [11]  443 	push	hl
   024A C5            [11]  444 	push	bc
   024B D5            [11]  445 	push	de
   024C CDr00r00      [17]  446 	call	_cpct_drawSprite
   024F                     447 00112$:
   024F DD F9         [10]  448 	ld	sp, ix
   0251 DD E1         [14]  449 	pop	ix
   0253 C9            [10]  450 	ret
                            451 ;src/game/depot.c:86: void drawAllLocomotives(u8 iSelect)
                            452 ;	---------------------------------
                            453 ; Function drawAllLocomotives
                            454 ; ---------------------------------
   0254                     455 _drawAllLocomotives::
                            456 ;src/game/depot.c:90: putM0();
   0254 CDr00r00      [17]  457 	call	_putM0
                            458 ;src/game/depot.c:92: cpct_clearScreen(cpct_px2byteM0(9,9));
   0257 21 09 09      [10]  459 	ld	hl,#0x0909
   025A E5            [11]  460 	push	hl
   025B CDr00r00      [17]  461 	call	_cpct_px2byteM0
   025E 65            [ 4]  462 	ld	h,l
   025F 01 00 40      [10]  463 	ld	bc,#0x4000
   0262 C5            [11]  464 	push	bc
   0263 E5            [11]  465 	push	hl
   0264 33            [ 6]  466 	inc	sp
   0265 21 00 C0      [10]  467 	ld	hl,#0xC000
   0268 E5            [11]  468 	push	hl
   0269 CDr00r00      [17]  469 	call	_cpct_memset
                            470 ;src/game/depot.c:93: for(i=0; i<12; i++)
   026C 16 00         [ 7]  471 	ld	d,#0x00
   026E                     472 00102$:
                            473 ;src/game/depot.c:94: drawLocomotive(i, iSelect);
   026E D5            [11]  474 	push	de
   026F 21 04 00      [10]  475 	ld	hl, #4+0
   0272 39            [11]  476 	add	hl, sp
   0273 7E            [ 7]  477 	ld	a, (hl)
   0274 F5            [11]  478 	push	af
   0275 33            [ 6]  479 	inc	sp
   0276 D5            [11]  480 	push	de
   0277 33            [ 6]  481 	inc	sp
   0278 CDrBFr00      [17]  482 	call	_drawLocomotive
   027B F1            [10]  483 	pop	af
   027C D1            [10]  484 	pop	de
                            485 ;src/game/depot.c:93: for(i=0; i<12; i++)
   027D 14            [ 4]  486 	inc	d
   027E 7A            [ 4]  487 	ld	a,d
   027F D6 0C         [ 7]  488 	sub	a, #0x0C
   0281 38 EB         [12]  489 	jr	C,00102$
   0283 C9            [10]  490 	ret
                            491 ;src/game/depot.c:97: u8 confirmBuyLocomotive(u8 iSelect)
                            492 ;	---------------------------------
                            493 ; Function confirmBuyLocomotive
                            494 ; ---------------------------------
   0284                     495 _confirmBuyLocomotive::
   0284 DD E5         [15]  496 	push	ix
   0286 DD 21 00 00   [14]  497 	ld	ix,#0
   028A DD 39         [15]  498 	add	ix,sp
   028C 21 EE FF      [10]  499 	ld	hl,#-18
   028F 39            [11]  500 	add	hl,sp
   0290 F9            [ 6]  501 	ld	sp,hl
                            502 ;src/game/depot.c:104: putM2();
   0291 CDr00r00      [17]  503 	call	_putM2
                            504 ;src/game/depot.c:106: txtWindowLocomotive[1] = "";	
   0294 21 00 00      [10]  505 	ld	hl,#0x0000
   0297 39            [11]  506 	add	hl,sp
   0298 5D            [ 4]  507 	ld	e,l
   0299 54            [ 4]  508 	ld	d,h
   029A 23            [ 6]  509 	inc	hl
   029B 23            [ 6]  510 	inc	hl
   029C 01rEDr04      [10]  511 	ld	bc,#___str_2+0
   029F 71            [ 7]  512 	ld	(hl),c
   02A0 23            [ 6]  513 	inc	hl
   02A1 70            [ 7]  514 	ld	(hl),b
                            515 ;src/game/depot.c:108: switch(iSelect)
   02A2 3E 03         [ 7]  516 	ld	a,#0x03
   02A4 DD 96 04      [19]  517 	sub	a, 4 (ix)
   02A7 DArABr03      [10]  518 	jp	C,00105$
                            519 ;src/game/depot.c:112: txtWindowLocomotive[2] = "Propulsion: steam";
   02AA 21 04 00      [10]  520 	ld	hl,#0x0004
   02AD 19            [11]  521 	add	hl,de
   02AE DD 75 FC      [19]  522 	ld	-4 (ix),l
   02B1 DD 74 FD      [19]  523 	ld	-3 (ix),h
                            524 ;src/game/depot.c:113: txtWindowLocomotive[3] = "Entry of service: 1909";
   02B4 21 06 00      [10]  525 	ld	hl,#0x0006
   02B7 19            [11]  526 	add	hl,de
   02B8 DD 75 FE      [19]  527 	ld	-2 (ix),l
   02BB DD 74 FF      [19]  528 	ld	-1 (ix),h
                            529 ;src/game/depot.c:114: txtWindowLocomotive[4] = "Maximum speed: 80 km/h";
   02BE 21 08 00      [10]  530 	ld	hl,#0x0008
   02C1 19            [11]  531 	add	hl,de
   02C2 DD 75 FA      [19]  532 	ld	-6 (ix),l
   02C5 DD 74 FB      [19]  533 	ld	-5 (ix),h
                            534 ;src/game/depot.c:115: txtWindowLocomotive[5] = "Price: 1000$";
   02C8 21 0A 00      [10]  535 	ld	hl,#0x000A
   02CB 19            [11]  536 	add	hl,de
   02CC 4D            [ 4]  537 	ld	c,l
   02CD 44            [ 4]  538 	ld	b,h
                            539 ;src/game/depot.c:108: switch(iSelect)
   02CE D5            [11]  540 	push	de
   02CF DD 5E 04      [19]  541 	ld	e,4 (ix)
   02D2 16 00         [ 7]  542 	ld	d,#0x00
   02D4 21rDCr02      [10]  543 	ld	hl,#00125$
   02D7 19            [11]  544 	add	hl,de
   02D8 19            [11]  545 	add	hl,de
   02D9 19            [11]  546 	add	hl,de
   02DA D1            [10]  547 	pop	de
   02DB E9            [ 4]  548 	jp	(hl)
   02DC                     549 00125$:
   02DC C3rE8r02      [10]  550 	jp	00101$
   02DF C3r1Ar03      [10]  551 	jp	00102$
   02E2 C3r4Br03      [10]  552 	jp	00103$
   02E5 C3r7Cr03      [10]  553 	jp	00104$
                            554 ;src/game/depot.c:110: case 0:
   02E8                     555 00101$:
                            556 ;src/game/depot.c:111: txtWindowLocomotive[0] = "130 B";
   02E8 6B            [ 4]  557 	ld	l, e
   02E9 62            [ 4]  558 	ld	h, d
   02EA 36rEE         [10]  559 	ld	(hl),#<(___str_3)
   02EC 23            [ 6]  560 	inc	hl
   02ED 36s04         [10]  561 	ld	(hl),#>(___str_3)
                            562 ;src/game/depot.c:112: txtWindowLocomotive[2] = "Propulsion: steam";
   02EF DD 6E FC      [19]  563 	ld	l,-4 (ix)
   02F2 DD 66 FD      [19]  564 	ld	h,-3 (ix)
   02F5 36rF4         [10]  565 	ld	(hl),#<(___str_4)
   02F7 23            [ 6]  566 	inc	hl
   02F8 36s04         [10]  567 	ld	(hl),#>(___str_4)
                            568 ;src/game/depot.c:113: txtWindowLocomotive[3] = "Entry of service: 1909";
   02FA DD 6E FE      [19]  569 	ld	l,-2 (ix)
   02FD DD 66 FF      [19]  570 	ld	h,-1 (ix)
   0300 36r06         [10]  571 	ld	(hl),#<(___str_5)
   0302 23            [ 6]  572 	inc	hl
   0303 36s05         [10]  573 	ld	(hl),#>(___str_5)
                            574 ;src/game/depot.c:114: txtWindowLocomotive[4] = "Maximum speed: 80 km/h";
   0305 DD 6E FA      [19]  575 	ld	l,-6 (ix)
   0308 DD 66 FB      [19]  576 	ld	h,-5 (ix)
   030B 36r1D         [10]  577 	ld	(hl),#<(___str_6)
   030D 23            [ 6]  578 	inc	hl
   030E 36s05         [10]  579 	ld	(hl),#>(___str_6)
                            580 ;src/game/depot.c:115: txtWindowLocomotive[5] = "Price: 1000$";
   0310 3Er34         [ 7]  581 	ld	a,#<(___str_7)
   0312 02            [ 7]  582 	ld	(bc),a
   0313 03            [ 6]  583 	inc	bc
   0314 3Es05         [ 7]  584 	ld	a,#>(___str_7)
   0316 02            [ 7]  585 	ld	(bc),a
                            586 ;src/game/depot.c:116: break;
   0317 C3rABr03      [10]  587 	jp	00105$
                            588 ;src/game/depot.c:117: case 1:
   031A                     589 00102$:
                            590 ;src/game/depot.c:118: txtWindowLocomotive[0] = "141 TA";
   031A 6B            [ 4]  591 	ld	l, e
   031B 62            [ 4]  592 	ld	h, d
   031C 36r41         [10]  593 	ld	(hl),#<(___str_8)
   031E 23            [ 6]  594 	inc	hl
   031F 36s05         [10]  595 	ld	(hl),#>(___str_8)
                            596 ;src/game/depot.c:119: txtWindowLocomotive[2] = "Propulsion: steam";
   0321 DD 6E FC      [19]  597 	ld	l,-4 (ix)
   0324 DD 66 FD      [19]  598 	ld	h,-3 (ix)
   0327 36rF4         [10]  599 	ld	(hl),#<(___str_4)
   0329 23            [ 6]  600 	inc	hl
   032A 36s04         [10]  601 	ld	(hl),#>(___str_4)
                            602 ;src/game/depot.c:120: txtWindowLocomotive[3] = "Entry of service: 1911";
   032C DD 6E FE      [19]  603 	ld	l,-2 (ix)
   032F DD 66 FF      [19]  604 	ld	h,-1 (ix)
   0332 36r48         [10]  605 	ld	(hl),#<(___str_9)
   0334 23            [ 6]  606 	inc	hl
   0335 36s05         [10]  607 	ld	(hl),#>(___str_9)
                            608 ;src/game/depot.c:121: txtWindowLocomotive[4] = "Maximum speed: 70 km/h";
   0337 DD 6E FA      [19]  609 	ld	l,-6 (ix)
   033A DD 66 FB      [19]  610 	ld	h,-5 (ix)
   033D 36r5F         [10]  611 	ld	(hl),#<(___str_10)
   033F 23            [ 6]  612 	inc	hl
   0340 36s05         [10]  613 	ld	(hl),#>(___str_10)
                            614 ;src/game/depot.c:122: txtWindowLocomotive[5] = "Price: 900$";
   0342 3Er76         [ 7]  615 	ld	a,#<(___str_11)
   0344 02            [ 7]  616 	ld	(bc),a
   0345 03            [ 6]  617 	inc	bc
   0346 3Es05         [ 7]  618 	ld	a,#>(___str_11)
   0348 02            [ 7]  619 	ld	(bc),a
                            620 ;src/game/depot.c:123: break;
   0349 18 60         [12]  621 	jr	00105$
                            622 ;src/game/depot.c:124: case 2:
   034B                     623 00103$:
                            624 ;src/game/depot.c:125: txtWindowLocomotive[0] = "142 AT";
   034B 6B            [ 4]  625 	ld	l, e
   034C 62            [ 4]  626 	ld	h, d
   034D 36r82         [10]  627 	ld	(hl),#<(___str_12)
   034F 23            [ 6]  628 	inc	hl
   0350 36s05         [10]  629 	ld	(hl),#>(___str_12)
                            630 ;src/game/depot.c:126: txtWindowLocomotive[2] = "Propulsion: steam";
   0352 DD 6E FC      [19]  631 	ld	l,-4 (ix)
   0355 DD 66 FD      [19]  632 	ld	h,-3 (ix)
   0358 36rF4         [10]  633 	ld	(hl),#<(___str_4)
   035A 23            [ 6]  634 	inc	hl
   035B 36s04         [10]  635 	ld	(hl),#>(___str_4)
                            636 ;src/game/depot.c:127: txtWindowLocomotive[3] = "Entry of service: 1926";
   035D DD 6E FE      [19]  637 	ld	l,-2 (ix)
   0360 DD 66 FF      [19]  638 	ld	h,-1 (ix)
   0363 36r89         [10]  639 	ld	(hl),#<(___str_13)
   0365 23            [ 6]  640 	inc	hl
   0366 36s05         [10]  641 	ld	(hl),#>(___str_13)
                            642 ;src/game/depot.c:128: txtWindowLocomotive[4] = "Maximum speed: 95 km/h";
   0368 DD 6E FA      [19]  643 	ld	l,-6 (ix)
   036B DD 66 FB      [19]  644 	ld	h,-5 (ix)
   036E 36rA0         [10]  645 	ld	(hl),#<(___str_14)
   0370 23            [ 6]  646 	inc	hl
   0371 36s05         [10]  647 	ld	(hl),#>(___str_14)
                            648 ;src/game/depot.c:129: txtWindowLocomotive[5] = "Price: 1500$";
   0373 3ErB7         [ 7]  649 	ld	a,#<(___str_15)
   0375 02            [ 7]  650 	ld	(bc),a
   0376 03            [ 6]  651 	inc	bc
   0377 3Es05         [ 7]  652 	ld	a,#>(___str_15)
   0379 02            [ 7]  653 	ld	(bc),a
                            654 ;src/game/depot.c:130: break;
   037A 18 2F         [12]  655 	jr	00105$
                            656 ;src/game/depot.c:132: case 3:
   037C                     657 00104$:
                            658 ;src/game/depot.c:133: txtWindowLocomotive[0] = "141 P";
   037C 6B            [ 4]  659 	ld	l, e
   037D 62            [ 4]  660 	ld	h, d
   037E 36rC4         [10]  661 	ld	(hl),#<(___str_16)
   0380 23            [ 6]  662 	inc	hl
   0381 36s05         [10]  663 	ld	(hl),#>(___str_16)
                            664 ;src/game/depot.c:134: txtWindowLocomotive[2] = "Propulsion: steam";
   0383 DD 6E FC      [19]  665 	ld	l,-4 (ix)
   0386 DD 66 FD      [19]  666 	ld	h,-3 (ix)
   0389 36rF4         [10]  667 	ld	(hl),#<(___str_4)
   038B 23            [ 6]  668 	inc	hl
   038C 36s04         [10]  669 	ld	(hl),#>(___str_4)
                            670 ;src/game/depot.c:135: txtWindowLocomotive[3] = "Entry of service: 1942";
   038E DD 6E FE      [19]  671 	ld	l,-2 (ix)
   0391 DD 66 FF      [19]  672 	ld	h,-1 (ix)
   0394 36rCA         [10]  673 	ld	(hl),#<(___str_17)
   0396 23            [ 6]  674 	inc	hl
   0397 36s05         [10]  675 	ld	(hl),#>(___str_17)
                            676 ;src/game/depot.c:136: txtWindowLocomotive[4] = "Maximum speed: 105 km/h";
   0399 DD 6E FA      [19]  677 	ld	l,-6 (ix)
   039C DD 66 FB      [19]  678 	ld	h,-5 (ix)
   039F 36rE1         [10]  679 	ld	(hl),#<(___str_18)
   03A1 23            [ 6]  680 	inc	hl
   03A2 36s05         [10]  681 	ld	(hl),#>(___str_18)
                            682 ;src/game/depot.c:137: txtWindowLocomotive[5] = "Price: 2000$";
   03A4 3ErF9         [ 7]  683 	ld	a,#<(___str_19)
   03A6 02            [ 7]  684 	ld	(bc),a
   03A7 03            [ 6]  685 	inc	bc
   03A8 3Es05         [ 7]  686 	ld	a,#>(___str_19)
   03AA 02            [ 7]  687 	ld	(bc),a
                            688 ;src/game/depot.c:139: }
   03AB                     689 00105$:
                            690 ;src/game/depot.c:142: returnChoice = drawWindow(txtWindowLocomotive, 6, 1);
   03AB 21 06 01      [10]  691 	ld	hl,#0x0106
   03AE E5            [11]  692 	push	hl
   03AF D5            [11]  693 	push	de
   03B0 CDr00r00      [17]  694 	call	_drawWindow
   03B3 F1            [10]  695 	pop	af
   03B4 F1            [10]  696 	pop	af
   03B5 4D            [ 4]  697 	ld	c,l
                            698 ;src/game/depot.c:145: if (returnChoice==1)
   03B6 79            [ 4]  699 	ld	a,c
   03B7 3D            [ 4]  700 	dec	a
   03B8 C2rE7r04      [10]  701 	jp	NZ,00110$
                            702 ;src/game/depot.c:147: if(nbTrainList==0)
   03BB 3Ar00r00      [13]  703 	ld	a,(#_nbTrainList + 0)
   03BE B7            [ 4]  704 	or	a, a
   03BF 20 0F         [12]  705 	jr	NZ,00107$
                            706 ;src/game/depot.c:148: trainList = (Train*)malloc(sizeof(Train));
   03C1 C5            [11]  707 	push	bc
   03C2 21 09 00      [10]  708 	ld	hl,#0x0009
   03C5 E5            [11]  709 	push	hl
   03C6 CDr00r00      [17]  710 	call	_malloc
   03C9 F1            [10]  711 	pop	af
   03CA C1            [10]  712 	pop	bc
   03CB 22r00r00      [16]  713 	ld	(_trainList),hl
   03CE 18 1D         [12]  714 	jr	00108$
   03D0                     715 00107$:
                            716 ;src/game/depot.c:150: realloc(trainList, (nbTrainList+1)*sizeof(Train));
   03D0 FD 21r00r00   [14]  717 	ld	iy,#_nbTrainList
   03D4 FD 6E 00      [19]  718 	ld	l,0 (iy)
   03D7 26 00         [ 7]  719 	ld	h,#0x00
   03D9 23            [ 6]  720 	inc	hl
   03DA 5D            [ 4]  721 	ld	e, l
   03DB 54            [ 4]  722 	ld	d, h
   03DC 29            [11]  723 	add	hl, hl
   03DD 29            [11]  724 	add	hl, hl
   03DE 29            [11]  725 	add	hl, hl
   03DF 19            [11]  726 	add	hl, de
   03E0 EB            [ 4]  727 	ex	de,hl
   03E1 2Ar00r00      [16]  728 	ld	hl,(_trainList)
   03E4 C5            [11]  729 	push	bc
   03E5 D5            [11]  730 	push	de
   03E6 E5            [11]  731 	push	hl
   03E7 CDr00r00      [17]  732 	call	_realloc
   03EA F1            [10]  733 	pop	af
   03EB F1            [10]  734 	pop	af
   03EC C1            [10]  735 	pop	bc
   03ED                     736 00108$:
                            737 ;src/game/depot.c:153: trainList[nbTrainList].loco = iSelect;
   03ED ED 5Br00r00   [20]  738 	ld	de,(_nbTrainList)
   03F1 16 00         [ 7]  739 	ld	d,#0x00
   03F3 6B            [ 4]  740 	ld	l, e
   03F4 62            [ 4]  741 	ld	h, d
   03F5 29            [11]  742 	add	hl, hl
   03F6 29            [11]  743 	add	hl, hl
   03F7 29            [11]  744 	add	hl, hl
   03F8 19            [11]  745 	add	hl, de
   03F9 EB            [ 4]  746 	ex	de,hl
   03FA FD 2Ar00r00   [20]  747 	ld	iy,(_trainList)
   03FE FD 19         [15]  748 	add	iy, de
   0400 DD 7E 04      [19]  749 	ld	a,4 (ix)
   0403 FD 77 00      [19]  750 	ld	0 (iy), a
                            751 ;src/game/depot.c:156: trainList[nbTrainList].wagon[0] = 0;
   0406 ED 5Br00r00   [20]  752 	ld	de,(_nbTrainList)
   040A 16 00         [ 7]  753 	ld	d,#0x00
   040C 6B            [ 4]  754 	ld	l, e
   040D 62            [ 4]  755 	ld	h, d
   040E 29            [11]  756 	add	hl, hl
   040F 29            [11]  757 	add	hl, hl
   0410 29            [11]  758 	add	hl, hl
   0411 19            [11]  759 	add	hl, de
   0412 EB            [ 4]  760 	ex	de,hl
   0413 FD 2Ar00r00   [20]  761 	ld	iy,(_trainList)
   0417 FD 19         [15]  762 	add	iy, de
   0419 FD 23         [10]  763 	inc	iy
   041B FD 36 00 00   [19]  764 	ld	0 (iy), #0x00
                            765 ;src/game/depot.c:157: trainList[nbTrainList].wagon[1] = 0;
   041F ED 5Br00r00   [20]  766 	ld	de,(_nbTrainList)
   0423 16 00         [ 7]  767 	ld	d,#0x00
   0425 6B            [ 4]  768 	ld	l, e
   0426 62            [ 4]  769 	ld	h, d
   0427 29            [11]  770 	add	hl, hl
   0428 29            [11]  771 	add	hl, hl
   0429 29            [11]  772 	add	hl, hl
   042A 19            [11]  773 	add	hl, de
   042B EB            [ 4]  774 	ex	de,hl
   042C FD 2Ar00r00   [20]  775 	ld	iy,(_trainList)
   0430 FD 19         [15]  776 	add	iy, de
   0432 FD 23         [10]  777 	inc	iy
   0434 FD 23         [10]  778 	inc	iy
   0436 FD 36 00 00   [19]  779 	ld	0 (iy), #0x00
                            780 ;src/game/depot.c:158: trainList[nbTrainList].wagon[2] = 0;
   043A ED 5Br00r00   [20]  781 	ld	de,(_nbTrainList)
   043E 16 00         [ 7]  782 	ld	d,#0x00
   0440 6B            [ 4]  783 	ld	l, e
   0441 62            [ 4]  784 	ld	h, d
   0442 29            [11]  785 	add	hl, hl
   0443 29            [11]  786 	add	hl, hl
   0444 29            [11]  787 	add	hl, hl
   0445 19            [11]  788 	add	hl, de
   0446 EB            [ 4]  789 	ex	de,hl
   0447 FD 2Ar00r00   [20]  790 	ld	iy,(_trainList)
   044B FD 19         [15]  791 	add	iy, de
   044D FD 23         [10]  792 	inc	iy
   044F FD 23         [10]  793 	inc	iy
   0451 FD 23         [10]  794 	inc	iy
   0453 FD 36 00 00   [19]  795 	ld	0 (iy), #0x00
                            796 ;src/game/depot.c:159: trainList[nbTrainList].wagon[3] = 0;
   0457 ED 5Br00r00   [20]  797 	ld	de,(_nbTrainList)
   045B 16 00         [ 7]  798 	ld	d,#0x00
   045D 6B            [ 4]  799 	ld	l, e
   045E 62            [ 4]  800 	ld	h, d
   045F 29            [11]  801 	add	hl, hl
   0460 29            [11]  802 	add	hl, hl
   0461 29            [11]  803 	add	hl, hl
   0462 19            [11]  804 	add	hl, de
   0463 EB            [ 4]  805 	ex	de,hl
   0464 FD 2Ar00r00   [20]  806 	ld	iy,(_trainList)
   0468 FD 19         [15]  807 	add	iy, de
   046A 11 04 00      [10]  808 	ld	de,#0x0004
   046D FD 19         [15]  809 	add	iy, de
   046F FD 36 00 00   [19]  810 	ld	0 (iy), #0x00
                            811 ;src/game/depot.c:160: trainList[nbTrainList].wagon[4] = 0;
   0473 ED 5Br00r00   [20]  812 	ld	de,(_nbTrainList)
   0477 16 00         [ 7]  813 	ld	d,#0x00
   0479 6B            [ 4]  814 	ld	l, e
   047A 62            [ 4]  815 	ld	h, d
   047B 29            [11]  816 	add	hl, hl
   047C 29            [11]  817 	add	hl, hl
   047D 29            [11]  818 	add	hl, hl
   047E 19            [11]  819 	add	hl, de
   047F EB            [ 4]  820 	ex	de,hl
   0480 FD 2Ar00r00   [20]  821 	ld	iy,(_trainList)
   0484 FD 19         [15]  822 	add	iy, de
   0486 11 05 00      [10]  823 	ld	de,#0x0005
   0489 FD 19         [15]  824 	add	iy, de
   048B FD 36 00 00   [19]  825 	ld	0 (iy), #0x00
                            826 ;src/game/depot.c:161: trainList[nbTrainList].wagon[5] = 0;
   048F ED 5Br00r00   [20]  827 	ld	de,(_nbTrainList)
   0493 16 00         [ 7]  828 	ld	d,#0x00
   0495 6B            [ 4]  829 	ld	l, e
   0496 62            [ 4]  830 	ld	h, d
   0497 29            [11]  831 	add	hl, hl
   0498 29            [11]  832 	add	hl, hl
   0499 29            [11]  833 	add	hl, hl
   049A 19            [11]  834 	add	hl, de
   049B EB            [ 4]  835 	ex	de,hl
   049C FD 2Ar00r00   [20]  836 	ld	iy,(_trainList)
   04A0 FD 19         [15]  837 	add	iy, de
   04A2 11 06 00      [10]  838 	ld	de,#0x0006
   04A5 FD 19         [15]  839 	add	iy, de
   04A7 FD 36 00 00   [19]  840 	ld	0 (iy), #0x00
                            841 ;src/game/depot.c:162: trainList[nbTrainList].wagon[6] = 0;
   04AB ED 5Br00r00   [20]  842 	ld	de,(_nbTrainList)
   04AF 16 00         [ 7]  843 	ld	d,#0x00
   04B1 6B            [ 4]  844 	ld	l, e
   04B2 62            [ 4]  845 	ld	h, d
   04B3 29            [11]  846 	add	hl, hl
   04B4 29            [11]  847 	add	hl, hl
   04B5 29            [11]  848 	add	hl, hl
   04B6 19            [11]  849 	add	hl, de
   04B7 EB            [ 4]  850 	ex	de,hl
   04B8 FD 2Ar00r00   [20]  851 	ld	iy,(_trainList)
   04BC FD 19         [15]  852 	add	iy, de
   04BE 11 07 00      [10]  853 	ld	de,#0x0007
   04C1 FD 19         [15]  854 	add	iy, de
   04C3 FD 36 00 00   [19]  855 	ld	0 (iy), #0x00
                            856 ;src/game/depot.c:163: trainList[nbTrainList].wagon[7] = 0;
   04C7 ED 5Br00r00   [20]  857 	ld	de,(_nbTrainList)
   04CB 16 00         [ 7]  858 	ld	d,#0x00
   04CD 6B            [ 4]  859 	ld	l, e
   04CE 62            [ 4]  860 	ld	h, d
   04CF 29            [11]  861 	add	hl, hl
   04D0 29            [11]  862 	add	hl, hl
   04D1 29            [11]  863 	add	hl, hl
   04D2 19            [11]  864 	add	hl, de
   04D3 EB            [ 4]  865 	ex	de,hl
   04D4 FD 2Ar00r00   [20]  866 	ld	iy,(_trainList)
   04D8 FD 19         [15]  867 	add	iy, de
   04DA 11 08 00      [10]  868 	ld	de,#0x0008
   04DD FD 19         [15]  869 	add	iy, de
   04DF FD 36 00 00   [19]  870 	ld	0 (iy), #0x00
                            871 ;src/game/depot.c:166: nbTrainList++;
   04E3 21r00r00      [10]  872 	ld	hl, #_nbTrainList+0
   04E6 34            [11]  873 	inc	(hl)
   04E7                     874 00110$:
                            875 ;src/game/depot.c:169: return returnChoice;
   04E7 69            [ 4]  876 	ld	l,c
   04E8 DD F9         [10]  877 	ld	sp, ix
   04EA DD E1         [14]  878 	pop	ix
   04EC C9            [10]  879 	ret
   04ED                     880 ___str_2:
   04ED 00                  881 	.db 0x00
   04EE                     882 ___str_3:
   04EE 31 33 30 20 42      883 	.ascii "130 B"
   04F3 00                  884 	.db 0x00
   04F4                     885 ___str_4:
   04F4 50 72 6F 70 75 6C   886 	.ascii "Propulsion: steam"
        73 69 6F 6E 3A 20
        73 74 65 61 6D
   0505 00                  887 	.db 0x00
   0506                     888 ___str_5:
   0506 45 6E 74 72 79 20   889 	.ascii "Entry of service: 1909"
        6F 66 20 73 65 72
        76 69 63 65 3A 20
        31 39 30 39
   051C 00                  890 	.db 0x00
   051D                     891 ___str_6:
   051D 4D 61 78 69 6D 75   892 	.ascii "Maximum speed: 80 km/h"
        6D 20 73 70 65 65
        64 3A 20 38 30 20
        6B 6D 2F 68
   0533 00                  893 	.db 0x00
   0534                     894 ___str_7:
   0534 50 72 69 63 65 3A   895 	.ascii "Price: 1000$"
        20 31 30 30 30 24
   0540 00                  896 	.db 0x00
   0541                     897 ___str_8:
   0541 31 34 31 20 54 41   898 	.ascii "141 TA"
   0547 00                  899 	.db 0x00
   0548                     900 ___str_9:
   0548 45 6E 74 72 79 20   901 	.ascii "Entry of service: 1911"
        6F 66 20 73 65 72
        76 69 63 65 3A 20
        31 39 31 31
   055E 00                  902 	.db 0x00
   055F                     903 ___str_10:
   055F 4D 61 78 69 6D 75   904 	.ascii "Maximum speed: 70 km/h"
        6D 20 73 70 65 65
        64 3A 20 37 30 20
        6B 6D 2F 68
   0575 00                  905 	.db 0x00
   0576                     906 ___str_11:
   0576 50 72 69 63 65 3A   907 	.ascii "Price: 900$"
        20 39 30 30 24
   0581 00                  908 	.db 0x00
   0582                     909 ___str_12:
   0582 31 34 32 20 41 54   910 	.ascii "142 AT"
   0588 00                  911 	.db 0x00
   0589                     912 ___str_13:
   0589 45 6E 74 72 79 20   913 	.ascii "Entry of service: 1926"
        6F 66 20 73 65 72
        76 69 63 65 3A 20
        31 39 32 36
   059F 00                  914 	.db 0x00
   05A0                     915 ___str_14:
   05A0 4D 61 78 69 6D 75   916 	.ascii "Maximum speed: 95 km/h"
        6D 20 73 70 65 65
        64 3A 20 39 35 20
        6B 6D 2F 68
   05B6 00                  917 	.db 0x00
   05B7                     918 ___str_15:
   05B7 50 72 69 63 65 3A   919 	.ascii "Price: 1500$"
        20 31 35 30 30 24
   05C3 00                  920 	.db 0x00
   05C4                     921 ___str_16:
   05C4 31 34 31 20 50      922 	.ascii "141 P"
   05C9 00                  923 	.db 0x00
   05CA                     924 ___str_17:
   05CA 45 6E 74 72 79 20   925 	.ascii "Entry of service: 1942"
        6F 66 20 73 65 72
        76 69 63 65 3A 20
        31 39 34 32
   05E0 00                  926 	.db 0x00
   05E1                     927 ___str_18:
   05E1 4D 61 78 69 6D 75   928 	.ascii "Maximum speed: 105 km/h"
        6D 20 73 70 65 65
        64 3A 20 31 30 35
        20 6B 6D 2F 68
   05F8 00                  929 	.db 0x00
   05F9                     930 ___str_19:
   05F9 50 72 69 63 65 3A   931 	.ascii "Price: 2000$"
        20 32 30 30 30 24
   0605 00                  932 	.db 0x00
                            933 ;src/game/depot.c:172: void buyLocomotive()
                            934 ;	---------------------------------
                            935 ; Function buyLocomotive
                            936 ; ---------------------------------
   0606                     937 _buyLocomotive::
                            938 ;src/game/depot.c:174: u8 exit=0;
                            939 ;src/game/depot.c:176: u8 iSelect=0;
   0606 01 00 00      [10]  940 	ld	bc,#0x0000
                            941 ;src/game/depot.c:178: drawAllLocomotives(iSelect);
   0609 C5            [11]  942 	push	bc
   060A AF            [ 4]  943 	xor	a, a
   060B F5            [11]  944 	push	af
   060C 33            [ 6]  945 	inc	sp
   060D CDr54r02      [17]  946 	call	_drawAllLocomotives
   0610 33            [ 6]  947 	inc	sp
   0611 C1            [10]  948 	pop	bc
                            949 ;src/game/depot.c:180: do
   0612                     950 00124$:
                            951 ;src/game/depot.c:182: cpct_scanKeyboard(); 
   0612 C5            [11]  952 	push	bc
   0613 CDr00r00      [17]  953 	call	_cpct_scanKeyboard
   0616 21 00 01      [10]  954 	ld	hl,#0x0100
   0619 CDr00r00      [17]  955 	call	_cpct_isKeyPressed
   061C 7D            [ 4]  956 	ld	a,l
   061D C1            [10]  957 	pop	bc
   061E B7            [ 4]  958 	or	a, a
   061F 28 24         [12]  959 	jr	Z,00122$
                            960 ;src/game/depot.c:186: if (iSelect>0)
   0621 78            [ 4]  961 	ld	a,b
   0622 B7            [ 4]  962 	or	a, a
   0623 28 15         [12]  963 	jr	Z,00140$
                            964 ;src/game/depot.c:188: iSelect--;
   0625 05            [ 4]  965 	dec	b
                            966 ;src/game/depot.c:189: drawLocomotive(iSelect, iSelect);
   0626 C5            [11]  967 	push	bc
   0627 C5            [11]  968 	push	bc
   0628 33            [ 6]  969 	inc	sp
   0629 C5            [11]  970 	push	bc
   062A 33            [ 6]  971 	inc	sp
   062B CDrBFr00      [17]  972 	call	_drawLocomotive
   062E F1            [10]  973 	pop	af
   062F C1            [10]  974 	pop	bc
                            975 ;src/game/depot.c:190: drawLocomotive(iSelect+1, iSelect);
   0630 50            [ 4]  976 	ld	d,b
   0631 14            [ 4]  977 	inc	d
   0632 C5            [11]  978 	push	bc
   0633 4A            [ 4]  979 	ld	c, d
   0634 C5            [11]  980 	push	bc
   0635 CDrBFr00      [17]  981 	call	_drawLocomotive
   0638 F1            [10]  982 	pop	af
   0639 C1            [10]  983 	pop	bc
                            984 ;src/game/depot.c:192: for(i=0; i<14000; i++) {} // wait loop
   063A                     985 00140$:
   063A 11 B0 36      [10]  986 	ld	de,#0x36B0
   063D                     987 00129$:
   063D 1B            [ 6]  988 	dec	de
   063E 7A            [ 4]  989 	ld	a,d
   063F B3            [ 4]  990 	or	a,e
   0640 20 FB         [12]  991 	jr	NZ,00129$
   0642 C3rB7r06      [10]  992 	jp	00125$
   0645                     993 00122$:
                            994 ;src/game/depot.c:194: else if ( cpct_isKeyPressed(Key_CursorDown) )
   0645 C5            [11]  995 	push	bc
   0646 21 00 04      [10]  996 	ld	hl,#0x0400
   0649 CDr00r00      [17]  997 	call	_cpct_isKeyPressed
   064C 7D            [ 4]  998 	ld	a,l
   064D C1            [10]  999 	pop	bc
   064E B7            [ 4] 1000 	or	a, a
   064F 28 24         [12] 1001 	jr	Z,00119$
                           1002 ;src/game/depot.c:196: if (iSelect<11)
   0651 78            [ 4] 1003 	ld	a,b
   0652 D6 0B         [ 7] 1004 	sub	a, #0x0B
   0654 30 15         [12] 1005 	jr	NC,00144$
                           1006 ;src/game/depot.c:198: iSelect++;
   0656 04            [ 4] 1007 	inc	b
                           1008 ;src/game/depot.c:199: drawLocomotive(iSelect, iSelect);
   0657 C5            [11] 1009 	push	bc
   0658 C5            [11] 1010 	push	bc
   0659 33            [ 6] 1011 	inc	sp
   065A C5            [11] 1012 	push	bc
   065B 33            [ 6] 1013 	inc	sp
   065C CDrBFr00      [17] 1014 	call	_drawLocomotive
   065F F1            [10] 1015 	pop	af
   0660 C1            [10] 1016 	pop	bc
                           1017 ;src/game/depot.c:200: drawLocomotive(iSelect-1, iSelect);
   0661 50            [ 4] 1018 	ld	d,b
   0662 15            [ 4] 1019 	dec	d
   0663 C5            [11] 1020 	push	bc
   0664 4A            [ 4] 1021 	ld	c, d
   0665 C5            [11] 1022 	push	bc
   0666 CDrBFr00      [17] 1023 	call	_drawLocomotive
   0669 F1            [10] 1024 	pop	af
   066A C1            [10] 1025 	pop	bc
                           1026 ;src/game/depot.c:202: for(i=0; i<14000; i++) {} // wait loop
   066B                    1027 00144$:
   066B 11 B0 36      [10] 1028 	ld	de,#0x36B0
   066E                    1029 00132$:
   066E 1B            [ 6] 1030 	dec	de
   066F 7A            [ 4] 1031 	ld	a,d
   0670 B3            [ 4] 1032 	or	a,e
   0671 20 FB         [12] 1033 	jr	NZ,00132$
   0673 18 42         [12] 1034 	jr	00125$
   0675                    1035 00119$:
                           1036 ;src/game/depot.c:204: else if ( cpct_isKeyPressed(Key_Return) )
   0675 C5            [11] 1037 	push	bc
   0676 21 02 04      [10] 1038 	ld	hl,#0x0402
   0679 CDr00r00      [17] 1039 	call	_cpct_isKeyPressed
   067C 7D            [ 4] 1040 	ld	a,l
   067D C1            [10] 1041 	pop	bc
   067E B7            [ 4] 1042 	or	a, a
   067F 28 28         [12] 1043 	jr	Z,00116$
                           1044 ;src/game/depot.c:206: if(iSelect<locDelocked)
   0681 21r00r00      [10] 1045 	ld	hl,#_locDelocked
   0684 78            [ 4] 1046 	ld	a,b
   0685 96            [ 7] 1047 	sub	a, (hl)
   0686 30 17         [12] 1048 	jr	NC,00149$
                           1049 ;src/game/depot.c:208: if(confirmBuyLocomotive(iSelect) == 1)
   0688 C5            [11] 1050 	push	bc
   0689 C5            [11] 1051 	push	bc
   068A 33            [ 6] 1052 	inc	sp
   068B CDr84r02      [17] 1053 	call	_confirmBuyLocomotive
   068E 33            [ 6] 1054 	inc	sp
   068F C1            [10] 1055 	pop	bc
   0690 2D            [ 4] 1056 	dec	l
   0691 20 04         [12] 1057 	jr	NZ,00108$
                           1058 ;src/game/depot.c:209: exit=1;
   0693 0E 01         [ 7] 1059 	ld	c,#0x01
   0695 18 08         [12] 1060 	jr	00149$
   0697                    1061 00108$:
                           1062 ;src/game/depot.c:211: drawAllLocomotives(iSelect);
   0697 C5            [11] 1063 	push	bc
   0698 C5            [11] 1064 	push	bc
   0699 33            [ 6] 1065 	inc	sp
   069A CDr54r02      [17] 1066 	call	_drawAllLocomotives
   069D 33            [ 6] 1067 	inc	sp
   069E C1            [10] 1068 	pop	bc
                           1069 ;src/game/depot.c:214: for(i=0; i<14000; i++) {} // wait loop
   069F                    1070 00149$:
   069F 11 B0 36      [10] 1071 	ld	de,#0x36B0
   06A2                    1072 00135$:
   06A2 1B            [ 6] 1073 	dec	de
   06A3 7A            [ 4] 1074 	ld	a,d
   06A4 B3            [ 4] 1075 	or	a,e
   06A5 20 FB         [12] 1076 	jr	NZ,00135$
   06A7 18 0E         [12] 1077 	jr	00125$
   06A9                    1078 00116$:
                           1079 ;src/game/depot.c:216: else if ( cpct_isKeyPressed(Key_Esc) )
   06A9 C5            [11] 1080 	push	bc
   06AA 21 08 04      [10] 1081 	ld	hl,#0x0408
   06AD CDr00r00      [17] 1082 	call	_cpct_isKeyPressed
   06B0 7D            [ 4] 1083 	ld	a,l
   06B1 C1            [10] 1084 	pop	bc
   06B2 B7            [ 4] 1085 	or	a, a
   06B3 28 02         [12] 1086 	jr	Z,00125$
                           1087 ;src/game/depot.c:217: exit=1;
   06B5 0E 01         [ 7] 1088 	ld	c,#0x01
   06B7                    1089 00125$:
                           1090 ;src/game/depot.c:219: while(!exit);
   06B7 79            [ 4] 1091 	ld	a,c
   06B8 B7            [ 4] 1092 	or	a, a
   06B9 CAr12r06      [10] 1093 	jp	Z,00124$
                           1094 ;src/game/depot.c:221: putM2();
   06BC C3r00r00      [10] 1095 	jp  _putM2
                           1096 	.area _CODE
                           1097 	.area _INITIALIZER
                           1098 	.area _CABS (ABS)
